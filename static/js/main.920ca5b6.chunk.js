(this.webpackJsonpquizify=this.webpackJsonpquizify||[]).push([[0],{14:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAM1BMVEXk5ueutLeqsbTn6eqpr7PJzc/j5ebf4eLZ3N2wtrnBxsjN0NLGysy6v8HT1tissra8wMNxTKO9AAAFDklEQVR4nO2d3XqDIAxAlfivoO//tEOZWzvbVTEpic252W3PF0gAIcsyRVEURVEURVEURVEURVEURVEURVEURVEURVEURflgAFL/AirAqzXO9R7XNBVcy9TbuMHmxjN6lr92cNVVLKEurVfK/zCORVvW8iUBnC02dj+Wpu0z0Y6QlaN5phcwZqjkOkK5HZyPAjkIjSO4fIdfcOwFKkJlX4zPu7Ha1tIcwR3wWxyFhRG6g4Je0YpSPDJCV8a2Sv2zd1O1x/2WMDZCwljH+clRrHfWCLGK8REMiql//2si5+DKWKcWeAGcFMzzNrXC/0TUwQ2s6+LhlcwjTMlYsUIQzPOCb7YBiyHopyLXIEKPEkI/TgeuiidK/R9FniUDOjRDpvm0RhqjMyyXNjDhCfIMYl1gGjIMIuYsnGEYRMRZOMMunaLVwpWRW008v6fYKDIzxCwVAeNSO90BJW6emelYBRF/kHpYGVaoxTDAaxOFsfP9y8hpJ4xd7gOcij7JNGQ1EYFgkPJa1jQEiYZXRaRINKxSDUW9n+FT82lSKadkiru9/4XPqSLWOekGPoY05TAvLm9orm+YWuwHoBHkZKijNBJGmeb61eL6Ff/6q7bLr7yvv3vKGhpDRjvgjGaPz+gUg6YgcvpyAR2FIZ9U6nEEyZRTovmEU32KichpGn7C17XrfyH9gK/c0CMP05HZIM2uf9sEveizKveBy9/6Qt7o89ne33D525cfcIMW6ab+TMEukQbQbu+xu7X3A9bChmWaCeAkG17bpntwXgWxHaMzGPmUaR5dQZiKqRVeUZ3047fi3nAu28h4CHxCsZAgmEH8Y27jJAhm8c+5RQzRQNVGhVFSfxOYIjp/pP7RxzjevYXVGf4eLt+BJ1vCuLuLkrgABgCGXZ2wik5uty+oBvNirI6mkzhAf4Gsb58Hcm67Jzd+KwD10BYPLL3e0MjvKrgAULnOfveF/O4N2Xb9BZom3gJes3F9X5Zze8/6Yt09b4CrqsEjUv8oFBaR2rl+6CZr2xVrp24o/WitBKuGrrpl1+bFkmK2qXTON4VpbdfLa7o7y/WdLxG7lm2Lqh2clOwTegbvc/vj2U78CwhA87Bn8G5Nk3eOb0Nsr9flz3sG78UUtue4kpv1xvjg3TMay62BMlTlP+vrOMnJsRmt/ze0jsfkPPYdAH57hK+34PeOyc8XIXu5xT2HsUkdZz+adwg8HGFfQ3K5jtDvbUiO4Di9/ywHGrL88pDizZ++oTp+an+SMX/ndymUCwmHMdO7yuOx83pUx/eEMU0AvxWndwgidAqOZ8ypCwdEfvvEo6D9HwpA8wzvmOJEqAg9ySu8g4x0Hb9hSB/BANEKJ+LbPBU0lzbAJs4xt1AoshKkUGQmiH8/jJ0gdhTTLmSegHlPE0oOdXALnqDjKYh3px//fSgSWG8UqfrrIICzYYSJXRr9BSPbpNzw7gBjKjKOYI7ReIGqQRIap5+5MdjyvuDkExvGeXSlONWZAP3/AZBwJohU7QJRGU+cTVH18ELmRPNBmibW6MT/k1b0XhdkRBvyT6SB6EYv/GvhSmRNpGngRULsAlxMCGNXp7w3FfdEbTEEDdLI9TdIKRUzUesa3I461ER8cpNT7gMRhpKmYVS9ELOgCUQsa4SsulciKiLbY+AnHD8cpuhISsnxpamI84sbDq9qYJgf8wiiOBrC7Ml7M7ZECCqKoiiKoiiKoiiKoijv5AvJxlZRyNWWLwAAAABJRU5ErkJggg=="},24:function(e,t,n){},30:function(e,t,n){e.exports=n.p+"static/media/spotify.daf13776.png"},32:function(e,t,n){e.exports=n(53)},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),i=n.n(c),o=n(7),s=n(2),l=n(1),u=(n(24),n(14)),m=n.n(u),f=function(e){var t=e.artists;return r.a.createElement("div",{className:"artist-grid"},t.map((function(e,t){return r.a.createElement("div",{className:"artist-panel",key:t},r.a.createElement(o.b,{to:{pathname:"/play/".concat(encodeURIComponent(e.id)),state:{artistSelection:e}}},e&&e.images[0]&&r.a.createElement("img",{src:e.images[0].url,alt:"artist profile",width:"300",height:"300"}),e&&!e.images[0]&&r.a.createElement("img",{src:m.a,alt:"artist profile",width:"300",height:"300"})),r.a.createElement("h1",null,r.a.createElement("a",{href:e.external_urls.spotify,target:"_blank",rel:"noopener noreferrer"},e.name)))})))},p=n(9),b=n.n(p),g=function(e){var t=new b.a,n=Object(a.useState)(""),c=Object(l.a)(n,2),i=c[0],o=c[1],s=Object(a.useState)([]),u=Object(l.a)(s,2),m=u[0],p=u[1],g=Object(a.useState)(),E=Object(l.a)(g,2),h=E[0],d=E[1];Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("access_token"));d(e)}),[]),Object(a.useEffect)((function(){h&&t.setAccessToken(h)}),[h]),Object(a.useEffect)((function(){i&&t.search(i,["artist"],{limit:15}).then((function(e){p(e.artists.items)}))}),[i]);return r.a.createElement("div",null,r.a.createElement("form",{style:{marginBottom:"40px"},onSubmit:function(e){e.preventDefault(),i&&t.search(i,["artist"],{limit:6}).then((function(e){p(e.artists.items)}))}},r.a.createElement("input",{className:"search-input",placeholder:"Enter an artist",value:i,onChange:function(e){o(e.target.value)}})),r.a.createElement(f,{artists:m}))},E=function(e){return r.a.createElement("div",{className:"recommended-artists"},r.a.createElement("h1",{style:{marginBottom:"20px"}},"Your Top Artists:"),r.a.createElement("div",{className:"artist-grid",style:{justifyContent:"space-evenly"}},e.topArtists.map((function(e,t){return r.a.createElement("div",{className:"artist-panel",style:{flex:"none"},key:t},r.a.createElement(o.b,{to:{pathname:"/play/".concat(encodeURIComponent(e.id)),state:{artistSelection:e}}},e&&e.images[0]&&r.a.createElement("img",{src:e.images[0].url,alt:"artist profile",width:"200",height:"200"}),e&&!e.images[0]&&r.a.createElement("img",{src:m.a,alt:"artist profile",width:"200",height:"200"})),r.a.createElement("h2",null,r.a.createElement("a",{href:e.external_urls.spotify,target:"_blank",rel:"noopener noreferrer"},e.name)))}))))},h=Object(s.h)((function(e){var t=Object(a.useState)(),n=Object(l.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(),s=Object(l.a)(o,2),u=(s[0],s[1]),m=Object(a.useState)([]),f=Object(l.a)(m,2),p=f[0],h=f[1],d=new b.a;Object(a.useEffect)((function(){var t=JSON.parse(localStorage.getItem("access_token"));null===t&&e.history.push("/"),i(t)}),[]),Object(a.useEffect)((function(){c&&(d.setAccessToken(c),d.getMe().then((function(e){u(e)})),d.getMyTopArtists({limit:20}).then((function(e){var t=v(e.items);h(t.slice(0,5))})))}),[c]);var v=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[n],e[n]=a}return e};return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(E,{topArtists:p}),r.a.createElement(g,null))})),d=n(31),v=function(e){var t=e.component,n=Object(d.a)(e,["component"]);return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return function(){var e=new URLSearchParams(window.location.search).get("access_token");return!!JSON.parse(localStorage.getItem("access_token"))||!!e&&(localStorage.setItem("access_token",JSON.stringify(e)),!0)}()?r.a.createElement(t,Object.assign({},e,n)):r.a.createElement(s.a,{to:"/login"})}}))},O=n(30),y=n.n(O),j=function(e){return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"banner"},r.a.createElement("h1",{className:"banner-text"},"Quizify"),r.a.createElement("img",{style:{paddingLeft:"30px"},alt:"logo",src:y.a,width:"100",height:"100"})),r.a.createElement("button",{className:"login-btn",type:"login",onClick:function(){window.location="http://localhost:3001/login"}},"Login with Spotify"))},A=n(21),x=n(10),k=n(6),w=n.n(k),S=n(11),R=Object(s.h)((function(e){var t=Object(a.useState)(),n=Object(l.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(!1),s=Object(l.a)(o,2),u=s[0],m=s[1],f=Object(a.useState)(),p=Object(l.a)(f,2),g=p[0],E=p[1],h=null,d=new b.a;Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("access_token"));E(e)}),[]),Object(a.useEffect)((function(){g&&(h=setInterval((function(){return v()}),1e3),d.setAccessToken(g))}),[g]),Object(a.useEffect)((function(){c&&(O(),console.log("Player",c),c.connect())}),[c]);var v=function(){console.log("Checking for player..."),null!==window.Spotify&&(clearInterval(h),i(new window.Spotify.Player({name:"Spotify Web Player",getOAuthToken:function(e){e(g)}})))},O=function(){c.on("initialization_error",(function(e){console.error(e)})),c.on("authentication_error",(function(e){console.error(e)})),c.on("account_error",(function(e){console.error(e)})),c.on("playback_error",(function(e){console.error(e)})),c.on("player_state_changed",(function(e){y(e)}));var t=function(){var t=Object(S.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Let the music play!"),console.log(n.device_id),t.next=4,d.transferMyPlayback([n.device_id]);case 4:return t.next=6,d.getMyCurrentPlaybackState();case 6:if(!t.sent.device.is_restricted){t.next=11;break}window.location.assign("".concat("/quizify","/play/").concat(e.artistId)),t.next=16;break;case 11:return t.next=13,d.play({device_id:n.device_id,uris:e.songs,position_ms:35e3});case 13:return t.next=15,d.setVolume(50);case 15:e.handleWebPlayerActive(!0);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();c.on("ready",t)},y=function(e){null!==e&&m(!u)};return r.a.createElement("div",null)})),I=function(e){return r.a.createElement(a.Fragment,null,!e.webPlayerActive&&r.a.createElement("div",{className:"lds-roller"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))},M=function(e){return r.a.createElement(a.Fragment,null,e.gameChoices.length>0&&e.webPlayerActive&&r.a.createElement("div",{className:"game-interface"},[0,1,2,3].map((function(t){return r.a.createElement("button",{key:t,onClick:function(){return e.handleGameButton(t)},className:"game-btn ".concat(!0===e.showAnswers?e.correctChoice===t?"game-btn-correct":"game-btn-incorrect":"")},e.gameChoices[t].name)}))))},N=n(22),P=n.n(N);P.a.setAppElement("#root");var T=Object(s.h)((function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(e.seconds),s=Object(l.a)(o,2),u=s[0],m=s[1],f=Object(a.useState)(),p=Object(l.a)(f,2),g=p[0],E=p[1];(new b.a).setAccessToken(e.token),Object(a.useEffect)((function(){E(setInterval((function(){m((function(e){return e-1}))}),1e3))}),[]),Object(a.useEffect)((function(){if(0===u)return clearInterval(g),console.log("Game ended!"),void i(!0);function t(){return(t=Object(S.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.pauseTimer){t.next=5;break}return clearInterval(g),t.next=4,e.sleep(e.SLEEP_TIMER);case 4:E(setInterval((function(){m((function(e){return e-1}))}),1e3));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[u]),Object(a.useEffect)((function(){return function(){clearInterval(g)}}),[g]);return r.a.createElement("div",null,r.a.createElement("h1",null,function(e){var t=e%60,n=Math.floor(e/60);return n=n<1?"00":n<10?"0".concat(n):n,t=t<1?"00":t<10?"0".concat(t):t,"".concat(n,":").concat(t)}(u)),r.a.createElement(P.a,{isOpen:c,className:"finish-game-modal",overlayClassName:"finish-game-overlay"},r.a.createElement("h1",null,"You got ",e.score," points!"),r.a.createElement("button",{style:{margin:"20px 0px"},onClick:e.handlePlayAgain},"Play Again"),r.a.createElement("button",{onClick:e.handleQuit},"Quit")))})),C=function(e){return r.a.createElement(a.Fragment,null,e.currentSong&&e.webPlayerActive&&[r.a.createElement("button",{key:"quit",onClick:e.handleQuit},"Quit"),r.a.createElement("h1",{key:"score"},"Score: ",e.score),r.a.createElement("h1",{key:"answer"},"Current song: ",e.currentSong.song.name),r.a.createElement(T,{key:"timer",seconds:e.GAME_TIMER,token:e.token,pauseTimer:e.pauseTimer,sleep:e.sleep,SLEEP_TIMER:e.SLEEP_TIMER,score:e.score,handlePlayAgain:e.handlePlayAgain,handleQuit:e.handleQuit}),r.a.createElement("img",{key:"album-cover",className:"album-cover",src:e.currentSong.song.album.images[0].url,alt:"album"})])},U=Object(s.h)((function(e){var t,n=new b.a,c=Object(a.useState)(),i=Object(l.a)(c,2),o=i[0],u=i[1],m=Object(a.useState)([]),f=Object(l.a)(m,2),p=f[0],g=f[1],E=Object(a.useState)(),h=Object(l.a)(E,2),d=h[0],v=h[1],O=Object(a.useState)(0),y=Object(l.a)(O,2),j=y[0],k=y[1],N=Object(a.useState)([]),P=Object(l.a)(N,2),T=P[0],U=P[1],L=Object(a.useState)(-1),z=Object(l.a)(L,2),G=z[0],K=z[1],B=Object(a.useState)(!1),J=Object(l.a)(B,2),V=J[0],Y=J[1],_=Object(a.useState)(!1),Q=Object(l.a)(_,2),W=Q[0],q=Q[1],H=Object(a.useState)(!1),D=Object(l.a)(H,2),X=D[0],Z=D[1],F=Object(s.g)().artistId;function $(){return($=Object(S.a)(w.a.mark((function e(t){var a,r,c,i,o,s,l,u,m,f;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getArtistAlbums(t,{limit:10});case 2:a=e.sent,r=[],c=Object(A.a)(a.items),e.prev=5,c.s();case 7:if((i=c.n()).done){e.next=16;break}return o=i.value,e.next=11,n.getAlbumTracks(o.id);case 11:s=e.sent,l=Object(A.a)(s.items);try{for(l.s();!(u=l.n()).done;)m=u.value,r.push(m)}catch(p){l.e(p)}finally{l.f()}case 14:e.next=7;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),c.e(e.t0);case 21:return e.prev=21,c.f(),e.finish(21);case 24:return r=ee(r),g(r),e.next=28,n.getTrack(r[0].id);case 28:f=e.sent,v({song:f,index:0});case 30:case"end":return e.stop()}}),e,null,[[5,18,21,24]])})))).apply(this,arguments)}Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("access_token"));u(e),function(e){$.apply(this,arguments)}(F)}),[]),Object(a.useEffect)((function(){o&&n.setAccessToken(o)}),[o]);var ee=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[n],e[n]=a}return e};Object(a.useEffect)((function(){p&&d&&te()}),[d]);var te=function(){for(var e=[-1,-1,-1,-1],t=Math.floor(4*Math.random()),n=0;n<4;n++)n!==t&&function(){for(var t=!1,a=-1;!t;)a=Math.floor(Math.random()*p.length),-1===e.indexOf(a)&&-1===e.findIndex((function(e){return-1!==e&&p[e].name===p[a].name}))&&a!==d.index&&p[a].name!==p[d.index].name&&(t=!0);e[n]=a}();(e=e.map((function(e){return p[e]})))[t]=p[d.index],K(t),U(e)},ne=function(){var e=Object(S.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T[t].name===d.song.name&&k(j+1),e.next=3,Y(!0);case 3:return e.next=5,Z(!0);case 5:return e.next=7,re(2e3);case 7:if(Y(!1),Z(!1),!(d.index>=p.length-1)){e.next=14;break}return e.next=12,ae(0);case 12:e.next=16;break;case 14:return e.next=16,ae(d.index+1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(S.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getTrack(p[t].id);case 2:return a=e.sent,v({song:a,index:t}),e.next=6,n.getMyCurrentPlayingTrack();case 6:e.sent.item.duration_ms>7e4?n.play({uris:[p[t].uri],position_ms:35e3}):n.play({uris:[p[t].uri]});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(e){return new Promise((function(t){return setTimeout(t,e)}))},ce=function(e){console.log("Quitting"),window.location.assign("".concat("/quizify","/"))};return r.a.createElement("div",{style:{fontFamily:"Montserrat",height:"100%",display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(I,{webPlayerActive:W}),p.length>0&&r.a.createElement(R,{songs:p.map((function(e){return e.uri})),handleWebPlayerActive:function(e){q(e)},artistId:F}),r.a.createElement(C,(t={currentSong:d,webPlayerActive:W,handleQuit:ce,score:j},Object(x.a)(t,"currentSong",d),Object(x.a)(t,"GAME_TIMER",5),Object(x.a)(t,"token",o),Object(x.a)(t,"pauseTimer",X),Object(x.a)(t,"sleep",re),Object(x.a)(t,"SLEEP_TIMER",2e3),Object(x.a)(t,"handlePlayAgain",(function(){window.location.assign("".concat("/quizify","/play/").concat(F))})),Object(x.a)(t,"handleQuit",ce),t)),r.a.createElement(M,{gameChoices:T,webPlayerActive:W,handleGameButton:ne,showAnswers:V,correctChoice:G}))})),L=(n(52),Object(s.h)((function(e){return Object(a.useLayoutEffect)((function(){document.title="Quizify"}),[]),r.a.createElement("div",{style:{textAlign:"center",height:"100%"}},r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/login",component:j,title:"Login"}),r.a.createElement(v,{path:"/play/:artistId",component:U,title:"Quizify"}),r.a.createElement(v,{path:"/",component:h,title:"Quizify"})))})));i.a.render(r.a.createElement(o.a,{basename:"/quizify"},r.a.createElement(L,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.920ca5b6.chunk.js.map